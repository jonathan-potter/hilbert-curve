!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=5)}([function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=e(4),a=Math.PI,u=document.getElementsByTagName("canvas")[0],c=u.getContext("2d"),f=10,s=3;c.setLineDash([100,10]);var l=110,y=function(){function t(n){var e=n.direction,i=n.position,o=n.length;r(this,t),this.direction=e,this.position=i,this.length=o}return i(t,[{key:"startDraw",value:function(){f=(f+s)%l,c.lineDashOffset=-f,c.lineWidth=2,c.strokeStyle="white",c.beginPath();var t=this.position,n=t.x,e=t.y;c.moveTo(n,e)}},{key:"draw",value:function(){this.drawPartial(1)}},{key:"drawPartial",value:function(t){var n=this.position,e=n.x,r=n.y,i=(0,o.scalarMultiply)(this.direction,this.length*t),a=i.x,u=i.y;c.lineTo(e+a,r+u),this.position={x:e+a,y:r+u}}},{key:"endDraw",value:function(){c.stroke()}},{key:"clearScreen",value:function(){c.clearRect(0,0,u.width,u.height)}},{key:"rotate",value:function(t){var n=0;"L"===t?n=a/2:"R"===t&&(n=-a/2),this.direction=(0,o.rotate)(this.direction,n)}}]),t}();n.default=y},function(t,n,e){"use strict";function r(t){return t%2==0}function i(t){return 1===o(t%2)}Object.defineProperty(n,"__esModule",{value:!0});var o=Math.abs,a=["S","R","R","S"],u=n.nextOrder=function(t,n){var e=t.concat(t),o=0,a=r(n)?r:i;return e=e.map(function(t,n){return"S"===t&&(o+=1),"S"===t&&a(o)&&0!==n?"L":t}),e=e.map(function(t,n){return"S"===t&&0!==n?"T":t}),e=e.map(function(t,n){return n>e.length/2?t:"R"===t?"L":"L"===t?"R":t}),e.concat(e.slice().reverse())};n.turnsForOrder=function(t){for(var n=a,e=2;e<=t;e++)n=u(n,e);return n}},function(t,n){},function(t,n){},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=Math.atan2,i=Math.cos,o=Math.PI,a=Math.random,u=Math.sin,c=Math.sqrt,f=(n.randomVelocity=function(t){var n=2*a()*o,e=a()*t;return{x:e*i(n),y:e*u(n)}},n.dot=function(t,n){return t.x*n.x+t.y*n.y},n.magnitude=function(t){var n=t.x,e=t.y;return c(n*n+e*e)}),s=n.argument=function(t){return r(t.y,t.x)};n.normalize=function(t){var n=t.x,e=t.y,r=f(t);return{x:n/r,y:e/r}},n.middlePoint=function(t,n){return{x:(t.x+n.x)/2,y:(t.y+n.y)/2}},n.add=function(t,n){return{x:t.x+n.x,y:t.y+n.y}},n.subtract=function(t,n){return{x:t.x-n.x,y:t.y-n.y}},n.scalarMultiply=function(t,n){return{x:t.x*n,y:t.y*n}},n.reverse=function(t){return{x:-t.x,y:-t.y}},n.rotate=function(t,n){var e=f(t),r=s(t);return{x:e*i(r+n),y:e*u(r+n)}}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){var t=new a.default({direction:{x:1,y:0},position:{x:v/2,y:v/2},length:v});"R"===h[1]&&t.rotate("L"),t.clearScreen(),x=c(x+d,p),t.startDraw();for(var n=0;n<x/v;n++){var e=h[n];e&&(t.draw(),t.rotate(e))}t.drawPartial(x%v/v),t.endDraw(),l(i)}var o=e(0),a=r(o),u=e(1);e(3),e(2);var c=Math.min,f=Math.sqrt,s=window,l=s.requestAnimationFrame,y=4,d=3,h=(0,u.turnsForOrder)(y),v=1/f(h.length)*500;h.shift();var x=0,p=h.length*v;l(i)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVpbGQvYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAzMDkzZGI5NmU2Y2RkMTdhM2NjZSIsIndlYnBhY2s6Ly8vLi9qYXZhc2NyaXB0L2NsYXNzZXMvRHJhd2luZ1ZlY3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9qYXZhc2NyaXB0L2NsYXNzZXMvSGlsYmVydC5qcyIsIndlYnBhY2s6Ly8vLi9qYXZhc2NyaXB0L2NsYXNzZXMvVmVjdG9yLmpzIiwid2VicGFjazovLy8uL2phdmFzY3JpcHQvaW5kZXguanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJ3cml0YWJsZSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9WZWN0b3IiLCJwaSIsIk1hdGgiLCJQSSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImRhc2hPZmZzZXQiLCJEQVNIX1NQRUVEIiwic2V0TGluZURhc2giLCJNQVhfT0ZGU0VUIiwiRHJhd2luZ1ZlY3RvciIsIl9yZWYiLCJkaXJlY3Rpb24iLCJwb3NpdGlvbiIsInRoaXMiLCJsaW5lRGFzaE9mZnNldCIsImxpbmVXaWR0aCIsInN0cm9rZVN0eWxlIiwiYmVnaW5QYXRoIiwiX3Bvc2l0aW9uIiwieCIsInkiLCJtb3ZlVG8iLCJkcmF3UGFydGlhbCIsInBvcnRpb24iLCJfcG9zaXRpb24yIiwiX3NjYWxhck11bHRpcGx5Iiwic2NhbGFyTXVsdGlwbHkiLCJkeCIsImR5IiwibGluZVRvIiwic3Ryb2tlIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJhbmdsZSIsInJvdGF0ZSIsImRlZmF1bHQiLCJpc0V2ZW4iLCJudW1iZXIiLCJpc09kZCIsImFicyIsIlNFRUQiLCJuZXh0T3JkZXIiLCJjdXJ2ZSIsIm9yZGVyIiwibmV3Q3VydmUiLCJjb25jYXQiLCJudW1TIiwiY29tcGFyZSIsIm1hcCIsInR1cm4iLCJpbmRleCIsInNsaWNlIiwicmV2ZXJzZSIsInR1cm5zRm9yT3JkZXIiLCJPUkRFUiIsImF0YW4yIiwiY29zIiwicmFuZG9tIiwic2luIiwic3FydCIsIm1hZ25pdHVkZSIsInJhbmRvbVZlbG9jaXR5IiwibWF4U3BlZWQiLCJzcGVlZCIsImRvdCIsInZlY3RvcjEiLCJ2ZWN0b3IyIiwidmVjdG9yIiwiYXJndW1lbnQiLCJub3JtYWxpemUiLCJtYWciLCJtaWRkbGVQb2ludCIsImFkZCIsInN1YnRyYWN0Iiwic2NhbGFyIiwiYXJnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsImRyYXciLCJkcmF3aW5nVmVjdG9yIiwiX0RyYXdpbmdWZWN0b3IyIiwicGl4ZWxzUGVyRWRnZSIsImNsZWFyU2NyZWVuIiwibWluIiwiUElYRUxTIiwiZ29hbFBvc2l0aW9uIiwic3RhcnREcmF3Iiwic3RlcCIsImVuZERyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJfRHJhd2luZ1ZlY3RvciIsIl9IaWxiZXJ0IiwiX3dpbmRvdyIsIndpbmRvdyIsInNoaWZ0Il0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0lu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MEMsR0szV3ZGLFFBQVNDLEtBQ1AsR0FBTUMsR0FBZ0IsR0FBQUMsR0FBQTdDLFNBQ3BCekIsV0FBYVEsRUFBRyxFQUFHQyxFQUFHLEdBQ3RCUixVQUFZTyxFQUFHK0QsRUFBZ0IsRUFBRzlELEVBQUc4RCxFQUFnQixHQUNyRDVGLE9BQVE0RixHQUVPLE9BQWJ2QyxFQUFNLElBQWNxQyxFQUFjN0MsT0FBTyxLQUM3QzZDLEVBQWNHLGNBRWR2RSxFQUFXd0UsRUFBSXhFLEVBQVd5RSxFQUFRQyxHQUVsQ04sRUFBY08sV0FDZCxLQUFLLEdBQUlDLEdBQU8sRUFBR0EsRUFBTzVFLEVBQVdzRSxFQUFlTSxJQUFRLENBQzFELEdBQU10QyxHQUFPUCxFQUFNNkMsRUFFZnRDLEtBQ0Y4QixFQUFjRCxPQUNkQyxFQUFjN0MsT0FBT2UsSUFHekI4QixFQUFjMUQsWUFBYVYsRUFBV3NFLEVBQWlCQSxHQUV2REYsRUFBY1MsVUFFZEMsRUFBc0JYLEdBMUN4QixHQUFBWSxHQUFBekksRUFBQSxHTHFYSStILEVBQWtCSixFQUF1QmMsR0twWDdDQyxFQUFBMUksRUFBQSxFQUVBQSxHQUFBLEdBQ0FBLEVBQUEsRUwyWEEsSUt6WFFrSSxHQUFjdEYsS0FBZHNGLElBQUt4QixFQUFTOUQsS0FBVDhELEtMMlhUaUMsRUsxWDhCQyxPQUExQkosRUwyWG9CRyxFSzNYcEJILHNCQUVGbkMsRUFBUSxFQUNSOEIsRUFBUyxFQUVUMUMsR0FBUSxFQUFBaUQsRUFBQXRDLGVBQWNDLEdBQ3RCMkIsRUFBaUIsRUFBSXRCLEVBQUtqQixFQUFNckQsUUFBVyxHQUVqRHFELEdBQU1vRCxPQUNOLElBQUluRixHQUFXLEVBQ1QwRSxFQUFlM0MsRUFBTXJELE9BQVM0RixDQTRCcENRLEdBQXNCWCIsImZpbGUiOiJidWlsZC9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfVmVjdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIHBpID0gTWF0aC5QSTtcblxuXG52YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2NhbnZhcycpWzBdO1xudmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxudmFyIGRhc2hPZmZzZXQgPSAxMDtcbnZhciBEQVNIX1NQRUVEID0gMztcbmNvbnRleHQuc2V0TGluZURhc2goWzEwMCwgMTBdKTtcbnZhciBNQVhfT0ZGU0VUID0gMTEwO1xuXG52YXIgRHJhd2luZ1ZlY3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRHJhd2luZ1ZlY3RvcihfcmVmKSB7XG4gICAgdmFyIGRpcmVjdGlvbiA9IF9yZWYuZGlyZWN0aW9uLFxuICAgICAgICBwb3NpdGlvbiA9IF9yZWYucG9zaXRpb24sXG4gICAgICAgIGxlbmd0aCA9IF9yZWYubGVuZ3RoO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYXdpbmdWZWN0b3IpO1xuXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKERyYXdpbmdWZWN0b3IsIFt7XG4gICAga2V5OiAnc3RhcnREcmF3JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnREcmF3KCkge1xuICAgICAgZGFzaE9mZnNldCA9IChkYXNoT2Zmc2V0ICsgREFTSF9TUEVFRCkgJSBNQVhfT0ZGU0VUO1xuICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IC1kYXNoT2Zmc2V0O1xuXG4gICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDI7XG4gICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICB2YXIgX3Bvc2l0aW9uID0gdGhpcy5wb3NpdGlvbixcbiAgICAgICAgICB4ID0gX3Bvc2l0aW9uLngsXG4gICAgICAgICAgeSA9IF9wb3NpdGlvbi55O1xuXG4gICAgICBjb250ZXh0Lm1vdmVUbyh4LCB5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkcmF3JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdygpIHtcbiAgICAgIHRoaXMuZHJhd1BhcnRpYWwoMSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZHJhd1BhcnRpYWwnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3UGFydGlhbChwb3J0aW9uKSB7XG4gICAgICB2YXIgX3Bvc2l0aW9uMiA9IHRoaXMucG9zaXRpb24sXG4gICAgICAgICAgeCA9IF9wb3NpdGlvbjIueCxcbiAgICAgICAgICB5ID0gX3Bvc2l0aW9uMi55O1xuXG4gICAgICB2YXIgX3NjYWxhck11bHRpcGx5ID0gKDAsIF9WZWN0b3Iuc2NhbGFyTXVsdGlwbHkpKHRoaXMuZGlyZWN0aW9uLCB0aGlzLmxlbmd0aCAqIHBvcnRpb24pLFxuICAgICAgICAgIGR4ID0gX3NjYWxhck11bHRpcGx5LngsXG4gICAgICAgICAgZHkgPSBfc2NhbGFyTXVsdGlwbHkueTtcblxuICAgICAgY29udGV4dC5saW5lVG8oeCArIGR4LCB5ICsgZHkpO1xuXG4gICAgICB0aGlzLnBvc2l0aW9uID0geyB4OiB4ICsgZHgsIHk6IHkgKyBkeSB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2VuZERyYXcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmREcmF3KCkge1xuICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbGVhclNjcmVlbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyU2NyZWVuKCkge1xuICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyb3RhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByb3RhdGUoZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgYW5nbGUgPSAwO1xuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ0wnKSB7XG4gICAgICAgIGFuZ2xlID0gcGkgLyAyO1xuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdSJykge1xuICAgICAgICBhbmdsZSA9IC1waSAvIDI7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gKDAsIF9WZWN0b3Iucm90YXRlKSh0aGlzLmRpcmVjdGlvbiwgYW5nbGUpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEcmF3aW5nVmVjdG9yO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEcmF3aW5nVmVjdG9yO1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbnZhciBhYnMgPSBNYXRoLmFicztcblxuXG52YXIgU0VFRCA9IFsnUycsICdSJywgJ1InLCAnUyddO1xuXG52YXIgbmV4dE9yZGVyID0gZXhwb3J0cy5uZXh0T3JkZXIgPSBmdW5jdGlvbiBuZXh0T3JkZXIoY3VydmUsIG9yZGVyKSB7XG4gIC8qIGNvcHkgKi9cbiAgdmFyIG5ld0N1cnZlID0gY3VydmUuY29uY2F0KGN1cnZlKTtcblxuICAvKiBmaWxsIGluIGxlZnQgdHVybnMgKi9cbiAgdmFyIG51bVMgPSAwO1xuICB2YXIgY29tcGFyZSA9IGlzRXZlbihvcmRlcikgPyBpc0V2ZW4gOiBpc09kZDtcbiAgbmV3Q3VydmUgPSBuZXdDdXJ2ZS5tYXAoZnVuY3Rpb24gKHR1cm4sIGluZGV4KSB7XG4gICAgaWYgKHR1cm4gPT09ICdTJykge1xuICAgICAgbnVtUyArPSAxO1xuICAgIH1cblxuICAgIGlmICh0dXJuID09PSAnUycgJiYgY29tcGFyZShudW1TKSAmJiBpbmRleCAhPT0gMCkge1xuICAgICAgcmV0dXJuICdMJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHR1cm47XG4gICAgfVxuICB9KTtcblxuICAvKiBmaWxsIGluIHN0cmFpZ2h0IGxpbmVzICovXG4gIG5ld0N1cnZlID0gbmV3Q3VydmUubWFwKGZ1bmN0aW9uICh0dXJuLCBpbmRleCkge1xuICAgIGlmICh0dXJuID09PSAnUycgJiYgaW5kZXggIT09IDApIHtcbiAgICAgIHJldHVybiAnVCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHR1cm47XG4gIH0pO1xuXG4gIC8qIGZsaXAgdGhlIHR1cm5zIGluIHRoZSBmaXJzdCBoYWxmICovXG4gIG5ld0N1cnZlID0gbmV3Q3VydmUubWFwKGZ1bmN0aW9uICh0dXJuLCBpbmRleCkge1xuICAgIGlmIChpbmRleCA+IG5ld0N1cnZlLmxlbmd0aCAvIDIpIHtcbiAgICAgIHJldHVybiB0dXJuO1xuICAgIH1cblxuICAgIGlmICh0dXJuID09PSAnUicpIHtcbiAgICAgIHJldHVybiAnTCc7XG4gICAgfSBlbHNlIGlmICh0dXJuID09PSAnTCcpIHtcbiAgICAgIHJldHVybiAnUic7XG4gICAgfVxuXG4gICAgcmV0dXJuIHR1cm47XG4gIH0pO1xuXG4gIC8qIGNvbmNhdCBhIG1pcnJvcmVkIHZlcnNpb24gdG8gdGhlIGVuZCAqL1xuICByZXR1cm4gbmV3Q3VydmUuY29uY2F0KG5ld0N1cnZlLnNsaWNlKCkucmV2ZXJzZSgpKTtcbn07XG5cbnZhciB0dXJuc0Zvck9yZGVyID0gZXhwb3J0cy50dXJuc0Zvck9yZGVyID0gZnVuY3Rpb24gdHVybnNGb3JPcmRlcihPUkRFUikge1xuICB2YXIgY3VydmUgPSBTRUVEO1xuXG4gIGZvciAodmFyIG9yZGVyID0gMjsgb3JkZXIgPD0gT1JERVI7IG9yZGVyKyspIHtcbiAgICBjdXJ2ZSA9IG5leHRPcmRlcihjdXJ2ZSwgb3JkZXIpO1xuICB9XG5cbiAgcmV0dXJuIGN1cnZlO1xufTtcblxuZnVuY3Rpb24gaXNFdmVuKG51bWJlcikge1xuICByZXR1cm4gbnVtYmVyICUgMiA9PT0gMDtcbn1cblxuZnVuY3Rpb24gaXNPZGQobnVtYmVyKSB7XG4gIHJldHVybiBhYnMobnVtYmVyICUgMikgPT09IDE7XG59XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgYXRhbjIgPSBNYXRoLmF0YW4yLFxuICAgIGNvcyA9IE1hdGguY29zLFxuICAgIHBpID0gTWF0aC5QSSxcbiAgICByYW5kb20gPSBNYXRoLnJhbmRvbSxcbiAgICBzaW4gPSBNYXRoLnNpbixcbiAgICBzcXJ0ID0gTWF0aC5zcXJ0O1xudmFyIHJhbmRvbVZlbG9jaXR5ID0gZXhwb3J0cy5yYW5kb21WZWxvY2l0eSA9IGZ1bmN0aW9uIHJhbmRvbVZlbG9jaXR5KG1heFNwZWVkKSB7XG4gIHZhciBkaXJlY3Rpb24gPSByYW5kb20oKSAqIDIgKiBwaTtcbiAgdmFyIHNwZWVkID0gcmFuZG9tKCkgKiBtYXhTcGVlZDtcblxuICByZXR1cm4ge1xuICAgIHg6IHNwZWVkICogY29zKGRpcmVjdGlvbiksXG4gICAgeTogc3BlZWQgKiBzaW4oZGlyZWN0aW9uKVxuICB9O1xufTtcblxudmFyIGRvdCA9IGV4cG9ydHMuZG90ID0gZnVuY3Rpb24gZG90KHZlY3RvcjEsIHZlY3RvcjIpIHtcbiAgcmV0dXJuIHZlY3RvcjEueCAqIHZlY3RvcjIueCArIHZlY3RvcjEueSAqIHZlY3RvcjIueTtcbn07XG5cbnZhciBtYWduaXR1ZGUgPSBleHBvcnRzLm1hZ25pdHVkZSA9IGZ1bmN0aW9uIG1hZ25pdHVkZSh2ZWN0b3IpIHtcbiAgdmFyIHggPSB2ZWN0b3IueCxcbiAgICAgIHkgPSB2ZWN0b3IueTtcblxuXG4gIHJldHVybiBzcXJ0KHggKiB4ICsgeSAqIHkpO1xufTtcblxudmFyIGFyZ3VtZW50ID0gZXhwb3J0cy5hcmd1bWVudCA9IGZ1bmN0aW9uIGFyZ3VtZW50KHZlY3Rvcikge1xuICByZXR1cm4gYXRhbjIodmVjdG9yLnksIHZlY3Rvci54KTtcbn07XG5cbnZhciBub3JtYWxpemUgPSBleHBvcnRzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZSh2ZWN0b3IpIHtcbiAgdmFyIHggPSB2ZWN0b3IueCxcbiAgICAgIHkgPSB2ZWN0b3IueTtcblxuICB2YXIgbWFnID0gbWFnbml0dWRlKHZlY3Rvcik7XG5cbiAgcmV0dXJuIHtcbiAgICB4OiB4IC8gbWFnLFxuICAgIHk6IHkgLyBtYWdcbiAgfTtcbn07XG5cbnZhciBtaWRkbGVQb2ludCA9IGV4cG9ydHMubWlkZGxlUG9pbnQgPSBmdW5jdGlvbiBtaWRkbGVQb2ludCh2ZWN0b3IxLCB2ZWN0b3IyKSB7XG4gIHJldHVybiB7XG4gICAgeDogKHZlY3RvcjEueCArIHZlY3RvcjIueCkgLyAyLFxuICAgIHk6ICh2ZWN0b3IxLnkgKyB2ZWN0b3IyLnkpIC8gMlxuICB9O1xufTtcblxudmFyIGFkZCA9IGV4cG9ydHMuYWRkID0gZnVuY3Rpb24gYWRkKHZlY3RvcjEsIHZlY3RvcjIpIHtcbiAgcmV0dXJuIHtcbiAgICB4OiB2ZWN0b3IxLnggKyB2ZWN0b3IyLngsXG4gICAgeTogdmVjdG9yMS55ICsgdmVjdG9yMi55XG4gIH07XG59O1xuXG52YXIgc3VidHJhY3QgPSBleHBvcnRzLnN1YnRyYWN0ID0gZnVuY3Rpb24gc3VidHJhY3QodmVjdG9yMSwgdmVjdG9yMikge1xuICByZXR1cm4ge1xuICAgIHg6IHZlY3RvcjEueCAtIHZlY3RvcjIueCxcbiAgICB5OiB2ZWN0b3IxLnkgLSB2ZWN0b3IyLnlcbiAgfTtcbn07XG5cbnZhciBzY2FsYXJNdWx0aXBseSA9IGV4cG9ydHMuc2NhbGFyTXVsdGlwbHkgPSBmdW5jdGlvbiBzY2FsYXJNdWx0aXBseSh2ZWN0b3IsIHNjYWxhcikge1xuICByZXR1cm4ge1xuICAgIHg6IHZlY3Rvci54ICogc2NhbGFyLFxuICAgIHk6IHZlY3Rvci55ICogc2NhbGFyXG4gIH07XG59O1xuXG52YXIgcmV2ZXJzZSA9IGV4cG9ydHMucmV2ZXJzZSA9IGZ1bmN0aW9uIHJldmVyc2UodmVjdG9yKSB7XG4gIHJldHVybiB7XG4gICAgeDogLXZlY3Rvci54LFxuICAgIHk6IC12ZWN0b3IueVxuICB9O1xufTtcblxudmFyIHJvdGF0ZSA9IGV4cG9ydHMucm90YXRlID0gZnVuY3Rpb24gcm90YXRlKHZlY3RvciwgYW5nbGUpIHtcbiAgdmFyIG1hZyA9IG1hZ25pdHVkZSh2ZWN0b3IpO1xuICB2YXIgYXJnID0gYXJndW1lbnQodmVjdG9yKTtcblxuICByZXR1cm4ge1xuICAgIHg6IG1hZyAqIGNvcyhhcmcgKyBhbmdsZSksXG4gICAgeTogbWFnICogc2luKGFyZyArIGFuZ2xlKVxuICB9O1xufTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfRHJhd2luZ1ZlY3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfRHJhd2luZ1ZlY3RvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EcmF3aW5nVmVjdG9yKTtcblxudmFyIF9IaWxiZXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIG1pbiA9IE1hdGgubWluLFxuICAgIHNxcnQgPSBNYXRoLnNxcnQ7XG52YXIgX3dpbmRvdyA9IHdpbmRvdyxcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBfd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuXG52YXIgT1JERVIgPSA0O1xudmFyIFBJWEVMUyA9IDM7XG5cbnZhciBjdXJ2ZSA9ICgwLCBfSGlsYmVydC50dXJuc0Zvck9yZGVyKShPUkRFUik7XG52YXIgcGl4ZWxzUGVyRWRnZSA9IDEgLyBzcXJ0KGN1cnZlLmxlbmd0aCkgKiA1MDA7XG5cbmN1cnZlLnNoaWZ0KCk7XG52YXIgcG9zaXRpb24gPSAwO1xudmFyIGdvYWxQb3NpdGlvbiA9IGN1cnZlLmxlbmd0aCAqIHBpeGVsc1BlckVkZ2U7XG5mdW5jdGlvbiBkcmF3KCkge1xuICB2YXIgZHJhd2luZ1ZlY3RvciA9IG5ldyBfRHJhd2luZ1ZlY3RvcjIuZGVmYXVsdCh7XG4gICAgZGlyZWN0aW9uOiB7IHg6IDEsIHk6IDAgfSxcbiAgICBwb3NpdGlvbjogeyB4OiBwaXhlbHNQZXJFZGdlIC8gMiwgeTogcGl4ZWxzUGVyRWRnZSAvIDIgfSxcbiAgICBsZW5ndGg6IHBpeGVsc1BlckVkZ2VcbiAgfSk7XG4gIGlmIChjdXJ2ZVsxXSA9PT0gJ1InKSB7XG4gICAgZHJhd2luZ1ZlY3Rvci5yb3RhdGUoJ0wnKTtcbiAgfVxuICBkcmF3aW5nVmVjdG9yLmNsZWFyU2NyZWVuKCk7XG5cbiAgcG9zaXRpb24gPSBtaW4ocG9zaXRpb24gKyBQSVhFTFMsIGdvYWxQb3NpdGlvbik7XG5cbiAgZHJhd2luZ1ZlY3Rvci5zdGFydERyYXcoKTtcbiAgZm9yICh2YXIgc3RlcCA9IDA7IHN0ZXAgPCBwb3NpdGlvbiAvIHBpeGVsc1BlckVkZ2U7IHN0ZXArKykge1xuICAgIHZhciB0dXJuID0gY3VydmVbc3RlcF07XG5cbiAgICBpZiAodHVybikge1xuICAgICAgZHJhd2luZ1ZlY3Rvci5kcmF3KCk7XG4gICAgICBkcmF3aW5nVmVjdG9yLnJvdGF0ZSh0dXJuKTtcbiAgICB9XG4gIH1cbiAgZHJhd2luZ1ZlY3Rvci5kcmF3UGFydGlhbChwb3NpdGlvbiAlIHBpeGVsc1BlckVkZ2UgLyBwaXhlbHNQZXJFZGdlKTtcblxuICBkcmF3aW5nVmVjdG9yLmVuZERyYXcoKTtcblxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhdyk7XG59XG5cbnJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3KTtcblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBidWlsZC9idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAzMDkzZGI5NmU2Y2RkMTdhM2NjZSIsImltcG9ydCB7IHJvdGF0ZSwgc2NhbGFyTXVsdGlwbHkgfSBmcm9tICdjbGFzc2VzL1ZlY3RvcidcblxuY29uc3QgeyBQSTogcGkgfSA9IE1hdGhcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2NhbnZhcycpWzBdXG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcblxubGV0IGRhc2hPZmZzZXQgPSAxMFxuY29uc3QgREFTSF9TUEVFRCA9IDNcbmNvbnRleHQuc2V0TGluZURhc2goWzEwMCwgMTBdKVxuY29uc3QgTUFYX09GRlNFVCA9IDExMFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcmF3aW5nVmVjdG9yIHtcbiAgY29uc3RydWN0b3IgKHsgZGlyZWN0aW9uLCBwb3NpdGlvbiwgbGVuZ3RoIH0pIHtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvblxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvblxuICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoXG4gIH1cblxuICBzdGFydERyYXcgKCkge1xuICAgIGRhc2hPZmZzZXQgPSAoZGFzaE9mZnNldCArIERBU0hfU1BFRUQpICUgTUFYX09GRlNFVFxuICAgIGNvbnRleHQubGluZURhc2hPZmZzZXQgPSAtZGFzaE9mZnNldFxuXG4gICAgY29udGV4dC5saW5lV2lkdGggPSAyXG4gICAgY29udGV4dC5zdHJva2VTdHlsZSA9ICd3aGl0ZSdcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpXG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLnBvc2l0aW9uXG4gICAgY29udGV4dC5tb3ZlVG8oeCwgeSlcbiAgfVxuXG4gIGRyYXcgKCkge1xuICAgIHRoaXMuZHJhd1BhcnRpYWwoMSlcbiAgfVxuXG4gIGRyYXdQYXJ0aWFsIChwb3J0aW9uKSB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLnBvc2l0aW9uXG4gICAgY29uc3QgeyB4OiBkeCwgeTogZHkgfSA9IHNjYWxhck11bHRpcGx5KHRoaXMuZGlyZWN0aW9uLCB0aGlzLmxlbmd0aCAqIHBvcnRpb24pXG4gICAgY29udGV4dC5saW5lVG8oeCArIGR4LCB5ICsgZHkpXG5cbiAgICB0aGlzLnBvc2l0aW9uID0geyB4OiB4ICsgZHgsIHk6IHkgKyBkeSB9XG4gIH1cblxuICBlbmREcmF3ICgpIHtcbiAgICBjb250ZXh0LnN0cm9rZSgpXG4gIH1cblxuICBjbGVhclNjcmVlbiAoKSB7XG4gICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxuICB9XG5cbiAgcm90YXRlIChkaXJlY3Rpb24pIHtcbiAgICBsZXQgYW5nbGUgPSAwXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ0wnKSB7XG4gICAgICBhbmdsZSA9IHBpIC8gMlxuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnUicpIHtcbiAgICAgIGFuZ2xlID0gLXBpIC8gMlxuICAgIH1cblxuICAgIHRoaXMuZGlyZWN0aW9uID0gcm90YXRlKHRoaXMuZGlyZWN0aW9uLCBhbmdsZSlcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vamF2YXNjcmlwdC9jbGFzc2VzL0RyYXdpbmdWZWN0b3IuanMiLCJjb25zdCB7IGFicyB9ID0gTWF0aFxuXG5jb25zdCBTRUVEID0gWydTJywgJ1InLCAnUicsICdTJ11cblxuZXhwb3J0IGNvbnN0IG5leHRPcmRlciA9IChjdXJ2ZSwgb3JkZXIpID0+IHtcbiAgLyogY29weSAqL1xuICBsZXQgbmV3Q3VydmUgPSBjdXJ2ZS5jb25jYXQoY3VydmUpXG5cbiAgLyogZmlsbCBpbiBsZWZ0IHR1cm5zICovXG4gIGxldCBudW1TID0gMFxuICBjb25zdCBjb21wYXJlID0gaXNFdmVuKG9yZGVyKSA/IGlzRXZlbiA6IGlzT2RkXG4gIG5ld0N1cnZlID0gbmV3Q3VydmUubWFwKCh0dXJuLCBpbmRleCkgPT4ge1xuICAgIGlmICh0dXJuID09PSAnUycpIHsgbnVtUyArPSAxIH1cblxuICAgIGlmICh0dXJuID09PSAnUycgJiYgY29tcGFyZShudW1TKSAmJiBpbmRleCAhPT0gMCkge1xuICAgICAgcmV0dXJuICdMJ1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHVyblxuICAgIH1cbiAgfSlcblxuICAvKiBmaWxsIGluIHN0cmFpZ2h0IGxpbmVzICovXG4gIG5ld0N1cnZlID0gbmV3Q3VydmUubWFwKCh0dXJuLCBpbmRleCkgPT4ge1xuICAgIGlmICh0dXJuID09PSAnUycgJiYgaW5kZXggIT09IDApIHsgcmV0dXJuICdUJyB9XG5cbiAgICByZXR1cm4gdHVyblxuICB9KVxuXG4gIC8qIGZsaXAgdGhlIHR1cm5zIGluIHRoZSBmaXJzdCBoYWxmICovXG4gIG5ld0N1cnZlID0gbmV3Q3VydmUubWFwKCh0dXJuLCBpbmRleCkgPT4ge1xuICAgIGlmIChpbmRleCA+IG5ld0N1cnZlLmxlbmd0aCAvIDIpIHsgcmV0dXJuIHR1cm4gfVxuXG4gICAgaWYgKHR1cm4gPT09ICdSJykge1xuICAgICAgcmV0dXJuICdMJ1xuICAgIH0gZWxzZSBpZiAodHVybiA9PT0gJ0wnKSB7XG4gICAgICByZXR1cm4gJ1InXG4gICAgfVxuXG4gICAgcmV0dXJuIHR1cm5cbiAgfSlcblxuICAvKiBjb25jYXQgYSBtaXJyb3JlZCB2ZXJzaW9uIHRvIHRoZSBlbmQgKi9cbiAgcmV0dXJuIG5ld0N1cnZlLmNvbmNhdChuZXdDdXJ2ZS5zbGljZSgpLnJldmVyc2UoKSlcbn1cblxuZXhwb3J0IGNvbnN0IHR1cm5zRm9yT3JkZXIgPSBPUkRFUiA9PiB7XG4gIGxldCBjdXJ2ZSA9IFNFRURcblxuICBmb3IgKGxldCBvcmRlciA9IDI7IG9yZGVyIDw9IE9SREVSOyBvcmRlcisrKSB7XG4gICAgY3VydmUgPSBuZXh0T3JkZXIoY3VydmUsIG9yZGVyKVxuICB9XG5cbiAgcmV0dXJuIGN1cnZlXG59XG5cbmZ1bmN0aW9uIGlzRXZlbiAobnVtYmVyKSB7XG4gIHJldHVybiBudW1iZXIgJSAyID09PSAwXG59XG5cbmZ1bmN0aW9uIGlzT2RkIChudW1iZXIpIHtcbiAgcmV0dXJuIGFicyhudW1iZXIgJSAyKSA9PT0gMVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vamF2YXNjcmlwdC9jbGFzc2VzL0hpbGJlcnQuanMiLCJjb25zdCB7IGF0YW4yLCBjb3MsIFBJOiBwaSwgcmFuZG9tLCBzaW4sIHNxcnQgfSA9IE1hdGhcblxuZXhwb3J0IGNvbnN0IHJhbmRvbVZlbG9jaXR5ID0gbWF4U3BlZWQgPT4ge1xuICBjb25zdCBkaXJlY3Rpb24gPSByYW5kb20oKSAqIDIgKiBwaVxuICBjb25zdCBzcGVlZCA9IHJhbmRvbSgpICogbWF4U3BlZWRcblxuICByZXR1cm4ge1xuICAgIHg6IHNwZWVkICogY29zKGRpcmVjdGlvbiksXG4gICAgeTogc3BlZWQgKiBzaW4oZGlyZWN0aW9uKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBkb3QgPSAodmVjdG9yMSwgdmVjdG9yMikgPT4ge1xuICByZXR1cm4gdmVjdG9yMS54ICogdmVjdG9yMi54ICsgdmVjdG9yMS55ICogdmVjdG9yMi55XG59XG5cbmV4cG9ydCBjb25zdCBtYWduaXR1ZGUgPSB2ZWN0b3IgPT4ge1xuICBjb25zdCB7IHgsIHkgfSA9IHZlY3RvclxuXG4gIHJldHVybiBzcXJ0KHggKiB4ICsgeSAqIHkpXG59XG5cbmV4cG9ydCBjb25zdCBhcmd1bWVudCA9IHZlY3RvciA9PiB7XG4gIHJldHVybiBhdGFuMih2ZWN0b3IueSwgdmVjdG9yLngpXG59XG5cbmV4cG9ydCBjb25zdCBub3JtYWxpemUgPSB2ZWN0b3IgPT4ge1xuICBjb25zdCB7IHgsIHkgfSA9IHZlY3RvclxuICBjb25zdCBtYWcgPSBtYWduaXR1ZGUodmVjdG9yKVxuXG4gIHJldHVybiB7XG4gICAgeDogeCAvIG1hZyxcbiAgICB5OiB5IC8gbWFnXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1pZGRsZVBvaW50ID0gKHZlY3RvcjEsIHZlY3RvcjIpID0+ICh7XG4gIHg6ICh2ZWN0b3IxLnggKyB2ZWN0b3IyLngpIC8gMixcbiAgeTogKHZlY3RvcjEueSArIHZlY3RvcjIueSkgLyAyXG59KVxuXG5leHBvcnQgY29uc3QgYWRkID0gKHZlY3RvcjEsIHZlY3RvcjIpID0+ICh7XG4gIHg6IHZlY3RvcjEueCArIHZlY3RvcjIueCxcbiAgeTogdmVjdG9yMS55ICsgdmVjdG9yMi55XG59KVxuXG5leHBvcnQgY29uc3Qgc3VidHJhY3QgPSAodmVjdG9yMSwgdmVjdG9yMikgPT4gKHtcbiAgeDogdmVjdG9yMS54IC0gdmVjdG9yMi54LFxuICB5OiB2ZWN0b3IxLnkgLSB2ZWN0b3IyLnlcbn0pXG5cbmV4cG9ydCBjb25zdCBzY2FsYXJNdWx0aXBseSA9ICh2ZWN0b3IsIHNjYWxhcikgPT4gKHtcbiAgeDogdmVjdG9yLnggKiBzY2FsYXIsXG4gIHk6IHZlY3Rvci55ICogc2NhbGFyXG59KVxuXG5leHBvcnQgY29uc3QgcmV2ZXJzZSA9IHZlY3RvciA9PiAoe1xuICB4OiAtdmVjdG9yLngsXG4gIHk6IC12ZWN0b3IueVxufSlcblxuZXhwb3J0IGNvbnN0IHJvdGF0ZSA9ICh2ZWN0b3IsIGFuZ2xlKSA9PiB7XG4gIGNvbnN0IG1hZyA9IG1hZ25pdHVkZSh2ZWN0b3IpXG4gIGNvbnN0IGFyZyA9IGFyZ3VtZW50KHZlY3RvcilcblxuICByZXR1cm4ge1xuICAgIHg6IG1hZyAqIGNvcyhhcmcgKyBhbmdsZSksXG4gICAgeTogbWFnICogc2luKGFyZyArIGFuZ2xlKVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qYXZhc2NyaXB0L2NsYXNzZXMvVmVjdG9yLmpzIiwiaW1wb3J0IERyYXdpbmdWZWN0b3IgZnJvbSAnY2xhc3Nlcy9EcmF3aW5nVmVjdG9yJ1xuaW1wb3J0IHsgdHVybnNGb3JPcmRlciB9IGZyb20gJ2NsYXNzZXMvSGlsYmVydCdcblxuaW1wb3J0ICdjc3MvaGVhZGVyLnNjc3MnXG5pbXBvcnQgJ2Nzcy9hcHAuc2NzcydcblxuY29uc3QgeyBtaW4sIHNxcnQgfSA9IE1hdGhcbmNvbnN0IHsgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIH0gPSB3aW5kb3dcblxuY29uc3QgT1JERVIgPSA0XG5jb25zdCBQSVhFTFMgPSAzXG5cbmNvbnN0IGN1cnZlID0gdHVybnNGb3JPcmRlcihPUkRFUilcbmNvbnN0IHBpeGVsc1BlckVkZ2UgPSAoMSAvIHNxcnQoY3VydmUubGVuZ3RoKSkgKiA1MDBcblxuY3VydmUuc2hpZnQoKVxubGV0IHBvc2l0aW9uID0gMFxuY29uc3QgZ29hbFBvc2l0aW9uID0gY3VydmUubGVuZ3RoICogcGl4ZWxzUGVyRWRnZVxuZnVuY3Rpb24gZHJhdyAoKSB7XG4gIGNvbnN0IGRyYXdpbmdWZWN0b3IgPSBuZXcgRHJhd2luZ1ZlY3Rvcih7XG4gICAgZGlyZWN0aW9uOiB7IHg6IDEsIHk6IDAgfSxcbiAgICBwb3NpdGlvbjogeyB4OiBwaXhlbHNQZXJFZGdlIC8gMiwgeTogcGl4ZWxzUGVyRWRnZSAvIDIgfSxcbiAgICBsZW5ndGg6IHBpeGVsc1BlckVkZ2VcbiAgfSlcbiAgaWYgKGN1cnZlWzFdID09PSAnUicpIHsgZHJhd2luZ1ZlY3Rvci5yb3RhdGUoJ0wnKSB9XG4gIGRyYXdpbmdWZWN0b3IuY2xlYXJTY3JlZW4oKVxuXG4gIHBvc2l0aW9uID0gbWluKHBvc2l0aW9uICsgUElYRUxTLCBnb2FsUG9zaXRpb24pXG5cbiAgZHJhd2luZ1ZlY3Rvci5zdGFydERyYXcoKVxuICBmb3IgKGxldCBzdGVwID0gMDsgc3RlcCA8IHBvc2l0aW9uIC8gcGl4ZWxzUGVyRWRnZTsgc3RlcCsrKSB7XG4gICAgY29uc3QgdHVybiA9IGN1cnZlW3N0ZXBdXG5cbiAgICBpZiAodHVybikge1xuICAgICAgZHJhd2luZ1ZlY3Rvci5kcmF3KClcbiAgICAgIGRyYXdpbmdWZWN0b3Iucm90YXRlKHR1cm4pXG4gICAgfVxuICB9XG4gIGRyYXdpbmdWZWN0b3IuZHJhd1BhcnRpYWwoKHBvc2l0aW9uICUgcGl4ZWxzUGVyRWRnZSkgLyBwaXhlbHNQZXJFZGdlKVxuXG4gIGRyYXdpbmdWZWN0b3IuZW5kRHJhdygpXG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXcpXG59XG5cbnJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3KVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vamF2YXNjcmlwdC9pbmRleC5qcyJdLCJzb3VyY2VSb290IjoiIn0=